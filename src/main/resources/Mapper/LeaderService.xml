<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.choi.elastic_job.service.LeaderService">
    <insert id="addJob" parameterType="com.choi.elastic_job.pojo.JobInfo">
        insert into job.alljobs values(#{id},#{name},#{category},#{param},#{scheduleType},#{scheduleParam},#{priority})
    </insert>
    <insert id="insert_job_result" parameterType="map">
        insert into job.alljobs values(#{result}) where id=#{id}
    </insert>
    <select id="select_job" parameterType="string" resultType="com.choi.elastic_job.pojo.JobInfo">
        select * from job.alljobs where id=#{id}
    </select>
    <select id="select_job_result" parameterType="string" resultType="string">
        select result from job.alljobs where id=#{id}
    </select>
    <select id="select_io_jobs" resultType="com.choi.elastic_job.pojo.JobCompareParam">
        select id,priority,param,scheduleType,scheduleParam,lastScheduleTime from job.alljobs where category="io"
    </select>
    <select id="select_storage_jobs" resultType="com.choi.elastic_job.pojo.JobCompareParam">
        select id,priority,param,scheduleType,scheduleParam,lastScheduleTime from job.alljobs where category="storage"
    </select>
    <select id="select_cpu_jobs" resultType="com.choi.elastic_job.pojo.JobCompareParam">
        select id,priority,param,scheduleType,scheduleParam,lastScheduleTime from job.alljobs where category="cpu"
    </select>
    <delete id="deleteJob" parameterType="string">
        delete from job.alljobs where id=#{id}
    </delete>
</mapper>